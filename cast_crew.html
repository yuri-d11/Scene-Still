<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" type="image/png" sizes="32x32" href="img/favicon.png">
		<title>Cast &amp; Crew</title>
		
				<!-- Google tag (gtag.js) -->
				<script async src="https://www.googletagmanager.com/gtag/js?id=G-QXMX7DRYJH"></script>
				<script>
					window.dataLayer = window.dataLayer || [];
					function gtag(){dataLayer.push(arguments);}
					gtag('js', new Date());

					gtag('config', 'G-QXMX7DRYJH');
				</script>
		<!-- Resource Hints -->
		<link rel="preconnect" href="https://api.themoviedb.org">
		<link rel="preconnect" href="https://image.tmdb.org">
		<link rel="dns-prefetch" href="https://api.themoviedb.org">
		<link rel="dns-prefetch" href="https://image.tmdb.org">
		
		<!-- Critical CSS - inline for instant render -->
		<style>
			@font-face{font-family:'Jost';src:url("fonts/Jost-VariableFont_wght.ttf") format('truetype');font-weight:100 900;font-style:normal;font-display:swap}
			body{font-family:Jost,sans-serif;background-color:#120D0D;margin:0;padding:0;min-height:100vh;display:flex;flex-direction:column}
			.wrapper{width:100%;max-width:1280px;margin:0 auto;padding:10px 50px;flex-grow:1}
			nav{display:flex;justify-content:space-between;align-items:center;background-color:transparent;padding:.5rem 0;flex-wrap:wrap;position:relative}
			.nav-list{list-style:none;display:flex;margin:0;padding:0;flex-wrap:wrap}
			.nav-list li{margin-right:30px}
			.nav-list li a{font-weight:400;font-size:16px;color:#FAFAFA;text-decoration:none;margin:8px 0;display:block}
			h1{color:#FAFAFA;font-size:36px;font-weight:600;margin-top:8px}
			h4,h5{color:#FAFAFA}
		</style>
		
		<!-- Minimal Bootstrap CSS - only used classes -->
		<link rel="stylesheet" href="css/bootstrap-minimal.css">
		
		<link href="css/style.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<link href="css/cast_crew.css" rel="stylesheet">

		<style>
			.section-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-top: 10px;
			}
		</style>
	</head>

        <body>
		<div class="wrapper">
			<nav>
				<button class="hamburger-menu" aria-label="Toggle navigation menu">
					<span></span>
					<span></span>
					<span></span>
				</button>
				<ul class="nav-list">
				  <li><a href="index.html">Films</a></li>
				  <li><a href="cast_crew.html" aria-current="page">Cast &amp; Crew</a></li>
				  <li><a href="color_extractor.html">Color Extractor</a></li>
				  <li><a href="about.html">About</a></li>
				</ul>
				<form class="search-form" action="#" method="get">
					<input type="text" placeholder="Search by film or person..." name="search" class="search-input" id="search-input">
				</form>
			</nav>
			<h1>Scene Still</h1>
			<h4>A handpicked gallery of high quality film screencaptures that highlight the visual language of cinema and the power of storytelling through composition, light, and color.</h4>
			<div class="column-grid" id="cast-crew-grid">  
				<div class="column-block">
					<h5>Cinematographers</h5>
					<ul class="name-list" id="cinematographers-list">
					</ul>
				</div>
				<div class="column-block">
					<h5>Directors</h5>
					<ul class="name-list" id="directors-list">
					</ul>
				</div>
				<div class="column-block">
					<h5>Cast</h5>
					<ul class="name-list" id="cast-list">
					</ul>
				</div>
			</div>
			<div class="section-header" id="search-results-section" style="display: none;">
				<h4 class="search-results-header">Search Results:</h4>
				<div class="view-options">
					<div class="histogram-container">
						<button class="histogram-bar" data-value="2" aria-label="2 items per row"></button>
						<button class="histogram-bar" data-value="3" aria-label="3 items per row"></button>
						<button class="histogram-bar" data-value="4" aria-label="4 items per row"></button>
						<button class="histogram-bar" data-value="5" aria-label="5 items per row"></button>
						<button class="histogram-bar" data-value="6" aria-label="6 items per row"></button>
					</div>
				</div>
			</div>
			<div class="image-container" id="film-cards-container" style="display: none;">
			</div>
		</div>
    <footer>
		<hr>
		<p>by Yuri Dandashi | <a href="about.html">About</a></p>
	</footer>
	<script src="js/hamburger-menu.js"></script>
	<script src="js/clean-urls.js"></script>
	<script src="utils/utils-http.js"></script>
	<script src="utils/utils-csv.js"></script>
	<script src="utils/utils-cache.js"></script>
	<script src="utils/utils-tmdb.js"></script>
	<script src="js/load-films.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', async () => {
			const movieIds = [];
			const csvText = await window.SZ.http.fetchWithRetry('Scene still DB - Sheet1.csv');
			const csvData = window.SZ.csv.parseCSVToObjects(csvText.text);
			csvData.forEach(row => {
				if (row['Movie ID']) {
					movieIds.push(parseInt(row['Movie ID']));
				}
			});

			const directors = new Set();
			const cinematographers = new Set();
			const cast = new Set();

			const movieDetailsPromises = movieIds.map(movieId => window.SZ.tmdb.getMovieDetails(movieId));
			const allMovieDetails = await Promise.all(movieDetailsPromises);

			allMovieDetails.forEach(movieDetails => {
				if (movieDetails && movieDetails.credits) {
					// Directors
					movieDetails.credits.crew.filter(p => p.job === 'Director').forEach(p => directors.add(p.name));
					// Cinematographers
					movieDetails.credits.crew.filter(p => p.job === 'Director of Photography').forEach(p => cinematographers.add(p.name));
					// Cast
					movieDetails.credits.cast.slice(0, 5).forEach(p => cast.add(p.name)); // Top 5 cast members
				}
			});

			const sortedDirectors = Array.from(directors).sort();
			const sortedCinematographers = Array.from(cinematographers).sort();
			const sortedCast = Array.from(cast).sort();

			const createPersonListItem = (name, role) => {
				const li = document.createElement('li');
				const a = document.createElement('a');
				// Function to convert special characters to ASCII equivalents for filenames
				const sanitizeNameForUrl = (personName) => {
					return personName
						.toLowerCase()
					.replace(/[äöü]/g, (c) => ({'ä': 'a', 'ö': 'o', 'ü': 'u'}[c])) // Replace German umlauts
					.replace(/[éáíóú]/g, (c) => ({'é': 'e', 'á': 'a', 'í': 'i', 'ó': 'o', 'ú': 'u'}[c])) // Replace acute accents
					.replace(/ō/g, 'o') // Replace romaji 'ō'
					.replace(/[^a-z0-9]+/g, '_') // Replace non-alphanumeric with underscore
					.replace(/^_+|_+$/g, ''); // Trim leading/trailing underscores
			};
			a.href = `person.html?name=${encodeURIComponent(name)}&role=${encodeURIComponent(role)}`;
			a.textContent = name;
			li.appendChild(a);
			return li;
		};			const directorsList = document.getElementById('directors-list');
			const cinematographersList = document.getElementById('cinematographers-list');
			const castList = document.getElementById('cast-list');

						sortedDirectors.forEach(name => directorsList.appendChild(createPersonListItem(name, 'Director')));
			sortedCinematographers.forEach(name => cinematographersList.appendChild(createPersonListItem(name, 'Cinematographer')));
			sortedCast.forEach(name => castList.appendChild(createPersonListItem(name, 'Actor')));
		});

		// Initialize search functionality
		window.SZ.searchManager.initializeSearch({
			searchInputId: 'search-input',
			filmCardsContainerId: 'film-cards-container',
			mainContentSelector: '#cast-crew-grid, .wrapper > h1, .wrapper > h4:not(.search-results-header)'
		});
	</script>
	</body>
</html>